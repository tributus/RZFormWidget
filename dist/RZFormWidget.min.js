rz.widgets.FormRenderers={},rz.widgets.RZFormWidgetHelpers={FormWidgetInterface:["fieldCount","getFieldIdAt",{name:"addField",description:"Adiciona um novo campo de entrada de dados ao formulário",friendlyName:"Adicionar campo",params:[{name:"fielddata",friendlyName:"Dados do campo",description:"Dados do campo que será adicionado (ver especificação)",type:"object"}]},"insertField","removeFieldAt","removeFieldById","getValueAt","getValueOf","setValueAt","setValueOf","setValueOfModel","getValueOfModel","getFormData","setFormData","clearFormData","validateForm","validateFieldAt","validateFieldOf","getFieldParams","getFieldValue","getGroupDefinition","getFieldsOfGroup","getFieldsOfRuleset","getFieldDefinitions","disableFields","enableFields","hideFields","displayFields","getGroupInfo","activateGroup","deactivateGroup"],FormWidgetEventHandlers:["data-changed",{name:"field-added",friendlyName:"Campo adicionado",description:"Evento disparado após a adição de um novo campo ao formulário",params:[{name:"sender",friendlyName:"Remetente",description:"Objeto que provocou o evento",type:"object"},{name:"args",friendlyName:"Informações adicionais",description:"Informações e dados do evento",type:"object"}]}]},rz.widgets.formHelpers={fieldRenderers:{},dataValidators:{},fieldPartRenderers:{},renderDataRows:function(sb,params,renderDataRow){void 0!==params.fields&&params.fields.forEach(function(it,ix){renderDataRow(sb,it,ix)})},renderDataFieldByType:function(sb,field,containerID,sender){this.fieldRenderers[field.type].render(sb,field,containerID,sender)},resolveModelName:function(field,generatedID){var hasGetAndSet=void 0!==rz.widgets.formHelpers.fieldRenderers[field.type].getValue&&void 0!==rz.widgets.formHelpers.fieldRenderers[field.type].setValue;return hasGetAndSet?void 0!==field.model&&null!=field.model.match(/^[a-zA-Z]+[0-9]*(\.[a-zA-Z]+[0-9]*)*$/)?field.model:generatedID+"_data":"***"},getInitialValueData:function(field){var data=field.initialValue;if(void 0===data)return"";var d="object"==typeof data?"object-data:["+btoa(JSON.stringify(data))+"]":data;return'data-initial-value="*"'.replace("*",d)},createFieldRenderer:function(n,d){this.fieldRenderers[n]=d},createFieldPartRenderer:function(n,d,t){var name=void 0===t?n:t+"."+n;this.fieldPartRenderers[name]=d},getFieldPartRenderer:function(n,t){var name=void 0===t?n:t+"."+n,renderer=this.fieldPartRenderers[name];if(void 0!==renderer)return renderer;throw'Field part renderer "*" not found'.replace("*",name)},createFormValidator:function(n,d){this.dataValidators[n]=d},validateField:function(n,s,v,p,h){this.dataValidators[n](s,v,p,h)},bindEventHandlers:function(sender){for(var rcount=sender.fieldCount(),i=0;rcount>i;i++){var id=sender.getFieldIdAt(i),type=$("#"+id).data("fieldtype");this.fieldRenderers[type].bindEvents(id,this.emit,sender)}},bindEventHandlersOfField:function(type,id,sender){this.fieldRenderers[type].bindEvents(id,this.emit,sender)},doPosRenderActions:function(sender){var rcount=sender.fieldCount();$("#"+sender.baseID+" .rz-tabpanel .item").tab(),$("#"+sender.baseID+" .ui.accordion").accordion();for(var i=0;rcount>i;i++){var id=sender.getFieldIdAt(i),type=$("#"+id).data("fieldtype");void 0!==this.fieldRenderers[type].doPosRenderActions&&this.fieldRenderers[type].doPosRenderActions(id,sender)}},doPosRenderActionsOfField:function(type,id,sender){void 0!==this.fieldRenderers[type].doPosRenderActions&&this.fieldRenderers[type].doPosRenderActions(id,sender)},getValueOfField:function(id,sender){var fieldType=$(id).data("fieldtype");return void 0!==fieldType&&this.fieldRenderers[fieldType].getValue?this.fieldRenderers[fieldType].getValue(id+"_"+fieldType,sender):void 0},setValueOfField:function(id,newValue,sender){var fieldType=$(id).data("fieldtype");this.fieldRenderers[fieldType].setValue&&this.fieldRenderers[fieldType].setValue(id+"_"+fieldType,newValue,sender)},emit:function(n,d,sender){var handlers=sender.getEventHandlers();void 0!==handlers[n]&&handlers[n].length>0&&handlers[n].forEach(function(it){it(sender,d)})},validateFormImpl:function($this,params,validationResultHandler,fieldsetRule,forceSuccess){validationResultHandler=rz.helpers.ensureFunction(validationResultHandler);var formData=$this.sender.getFormData(),$that=this;void 0!==params.validation&&params.validation.enabled?($this.sender.validationReport=[],params.validation.rules.forEach(function(rule){var fieldID=$("#"+$this.target+"base_form .field[data-model='"+rule.model+"']").attr("id");(void 0!==fieldsetRule&&$that.fieldMatchFieldSetRule(fieldID,fieldsetRule)||void 0===fieldsetRule)&&(forceSuccess||rz.widgets.formHelpers.validateField(rule.type,$this.sender,formData[rule.model],rule,function(result,params){result||$this.sender.validationReport.push({failedRule:rule})}))}),$this.sender.isFormInvalid=$this.sender.validationReport.length>0,$this.displayValidationReport(),validationResultHandler($this.sender,{validated:!$this.sender.isFormInvalid})):validationResultHandler($this.sender,{validated:!0})},displayValidationReportImpl:function($this){var fieldsSelector="#* .field".replace("*",$this.target);$(fieldsSelector).removeClass("error");var fieldSelector='#* [data-model="*"]'.replace("*",$this.target),reportTarget=$this.params.validation.reportTarget||"#"+$this.target+"_validation_report";if(void 0!==$this.sender.validationReport&&$this.sender.validationReport.length>0){var sb=new StringBuilder;sb.appendFormat('<div class="ui error message">'),sb.appendFormat('	<ul class="list">'),$this.sender.validationReport.forEach(function(item){sb.appendFormat("<li>{0}</li>",item.failedRule.message),$(fieldSelector.replace("*",item.failedRule.model)).addClass("error")}),sb.appendFormat("	</ul>"),sb.appendFormat("</div>"),$(reportTarget).html(sb.toString())}else $(reportTarget).empty()},getFormDataImpl:function($this,fieldsetRule){for(var root={},rcount=$this.sender.fieldCount(),i=0;rcount>i;i++){var id=$this.sender.getFieldIdAt(i),model=$("#"+id).data("model");void 0!==model&&"***"!=model&&(void 0!==fieldsetRule?this.fieldMatchFieldSetRule(id,fieldsetRule)&&rz.helpers.jsonUtils.setDataAtPath(root,$this.sender.getValueOf(id),model):rz.helpers.jsonUtils.setDataAtPath(root,$this.sender.getValueOf(id),model))}return root},setFormDataImpl:function(formData,$this,fieldsetRule){for(var rcount=$this.sender.fieldCount(),i=0;rcount>i;i++){var id=$this.sender.getFieldIdAt(i);if(void 0!==fieldsetRule&&this.fieldMatchFieldSetRule(id,fieldsetRule)||void 0===fieldsetRule){var model=$("#"+id).data("model");if(void 0!==model&&"***"!=model){var value=rz.helpers.jsonUtils.getDataAtPath(formData,model);$this.sender.setValueOfModel(model,value)}}}},clearFormDataImpl:function($this,fieldsetRule){for(var rcount=$this.sender.fieldCount(),i=0;rcount>i;i++){var id=$this.sender.getFieldIdAt(i);if(void 0!==fieldsetRule&&this.fieldMatchFieldSetRule(id,fieldsetRule)||void 0===fieldsetRule){var initialValue=$("#"+id).data("initial-value");void 0!==initialValue&&null!=initialValue.toString().match(/^object-data:\[.*]$/)&&(initialValue=initialValue.replace(/^object-data:\[/,"").replace(/]$/,""),initialValue=JSON.parse(atob(initialValue))),$this.sender.setValueAt(i,initialValue)}}},resolveFieldSet:function(field){if(void 0!==field.fieldSetName){if(field.fieldSetName.match(/^[a-zA-Z 0-9]+$/)){var fieldSets=field.fieldSetName.split(" "),ret=[];return fieldSets.forEach(function(item){""!==item&&ret.push("-FIELDSET-"+item)}),ret.length>0?" FIELDSET_MEMBER "+ret.join(" "):""}throw"invalid fieldset name"}return""},fieldMatchFieldSetRule:function(fieldID,fieldsetRule){var result="exclude"==fieldsetRule.rule;return fieldsetRule.fieldsets.every(function(item){var fsName="-FIELDSET-"+item;return"exclude"==fieldsetRule.rule?$("#"+fieldID).hasClass(fsName)?(result=!1,!1):!0:"restrict"==fieldsetRule.rule?$("#"+fieldID).hasClass(fsName)?(result=!0,!1):!0:void 0}),result},executeFieldAction:function(action,id,sender,params,fieldDefinition,callback){var frenderer=this.fieldRenderers[fieldDefinition.type||"text"];void 0!==frenderer&&void 0!==frenderer.executeAction&&frenderer.executeAction(action,id,sender,params,fieldDefinition,callback)}},rz.widgets.formHelpers.createFieldRenderer("actions",{render:function(sb,field,containerID,sender){field.widgetInstance=ruteZangada.renderWidget("rz-actions-bar","actionsBar",field.params,function(renderData,eventArgs,callback){eventArgs.cancel=!0,sb.append(renderData.data.toString()),sender.sender.innerWidgetInitializeData.push(renderData),callback(eventArgs)})},bindEvents:function(id,emit,sender){var fparams=rz.widgets.formHelpers.getFieldParams(id,sender.renderer.params.fields);fparams.widgetInstance.on("action-raised",function(s,e){emit(e.action,{field:id,targetElement:e,action:e.action,src:"usr"},sender)})},doPosRenderActions:function(id,$this){}}),rz.widgets.formHelpers.getFieldParams=function(id,fieldDefinitions){for(var i=0;i<fieldDefinitions.length;i++){var fieldDefinition=fieldDefinitions[i];if(fieldDefinition.fieldGroup){var fieldDefinition=this.getFieldParams(id,fieldDefinition.fields);if(void 0!==fieldDefinition)return fieldDefinition}else if(fieldDefinition.id==id)return fieldDefinition}},rz.widgets.formHelpers.createFieldRenderer("collection",{getContentRenderer:function(params){var itemsRenderer=rz.helpers.jsonUtils.getDataAtPath(params,"itemsSource.itemsRenderer");void 0==itemsRenderer&&(itemsRenderer={renderer:"default-list",rendererParams:{editingText:"editing"}});var contentRenderer=itemsRenderer.renderer;return void 0===contentRenderer?rz.widgets.formHelpers.getFieldPartRenderer("default-list","collection"):"string"==typeof contentRenderer?rz.widgets.formHelpers.getFieldPartRenderer(contentRenderer,"collection"):contentRenderer},render:function(sb,field,containerID){return sb.appendFormat('<div class="{0}">',field.mainElementCss||"ui raised secondary segment"),sb.appendFormat('   <div id="{0}_collection_container" class="ui {1} list collection-container">',containerID,field.collectionContainerCssClsss||"middle aligned divided"),sb.appendFormat("   </div>"),sb.appendFormat("</div>"),containerID+"_collection"},getValue:function(id){var results=[];return id=id.substring(0,id.lastIndexOf("_collection")),$(id+" .collection-dataitem").each(function(idx,item){var data=$(item).data("value");results.push(JSON.parse(atob(data)))}),results},setValue:function(fid,newValue,sender){var newElementIDS=[],id=fid.substring(0,fid.lastIndexOf("_collection")),fieldParams=rz.widgets.formHelpers.getFieldParams(id.replace("#",""),sender.renderer.params.fields),stateChangedHandler=fieldParams.stateChangedHandler||function(){},sb=new StringBuilder,$this=this,processAddValue=function(item){var itemid=id.replace("#","")+rz.helpers.generateRandomID();if(sb.appendFormat('       <div id="{1}" class="item collection-dataitem" data-value="{0}">',void 0!==item&&null!==item?btoa(JSON.stringify(item)):item,itemid),newElementIDS.push(itemid),fieldParams.__uid=itemid,!fieldParams.itemActions.hideActionsMenu){var actionsRenderer=fieldParams.itemActions.renderer||"default";"string"==typeof actionsRenderer&&(actionsRenderer=rz.widgets.formHelpers.getFieldPartRenderer(actionsRenderer,"collection")),actionsRenderer(sb,fieldParams)}sb.appendFormat('           <div class="data-area content">');var contentRenderer=$this.getContentRenderer(fieldParams);contentRenderer(sb,fieldParams,item),sb.appendFormat("           </div>"),sb.appendFormat("       </div>")},clearCollectionData=function(){$(fid+"_collection_container").empty()},initializeActionsDropdown=function(){setTimeout(function(){newElementIDS.forEach(function(item){var id="#"+item+" .ui.dropdown";$(id).dropdown({action:"hide",onChange:function(item){var $item=$("#"+item),action=$item.data("action"),rowID=$item.data("rowid"),fieldid=$item.data("targetfield"),rowData=JSON.parse(atob($("#"+rowID).data("value")));sender.raiseEvent("collection-request-change",{action:action,fieldid:fieldid,rowid:rowID,rowData:rowData},sender)}})}),newElementIDS=[]},100)};void 0!==newValue&&null!=newValue&&"object"==typeof newValue&&void 0!==newValue.length?newValue.forEach(function(item){processAddValue(item)}):void 0===newValue||null===newValue?clearCollectionData():processAddValue(newValue),$(fid+"_collection_container").append(sb.toString()),initializeActionsDropdown();var state=null==newValue||void 0==newValue?"empty":"added";stateChangedHandler(sender,{state:state,fieldParams:fieldParams})},bindEvents:function(id,emit,sender){var fieldParams=rz.widgets.formHelpers.getFieldParams(id,sender.renderer.params.fields),source=rz.helpers.jsonUtils.getDataAtPath(fieldParams,"itemsSource.type")||"fieldset",stateChangedHandler=fieldParams.stateChangedHandler||function(){},fieldsets={rule:"restrict",fieldsets:fieldParams.itemsSource.source.split(" ")};sender.on(fieldParams.itemsSource.addToCollectiontrigger,function(sender){if("fieldset"==source)sender.validateForm(function(sender,result){if(result.validated){var newItem=sender.getFormData(fieldsets);sender.clearFormData(fieldsets),sender.setValueOf(id,newItem,{bypassEventHandling:!0}),emit("data-changed",{fieldid:id,value:newItem,src:"usr",changeType:"add"},sender)}},fieldsets);else if("xxxxxxxxxxx?"==source)throw"NOT_IMPLEMENTED"}),sender.on(fieldParams.itemsSource.clearCollectionTrigger,function(sender){var confirmMethod=rz.helpers.jsonUtils.getDataAtPath(fieldParams,"itemsSource.confirmClearMethod");void 0!==confirmMethod?confirmMethod(sender,{params:fieldParams},function(confirm){confirm&&(sender.setValueOf(fieldParams.id,null,{bypassEventHandling:!0}),stateChangedHandler(sender,{state:"empty",fieldParams:fieldParams}),emit("data-changed",{fieldid:id,value:null,src:"usr",changeType:"clear"},sender))}):(sender.setValueOf(fieldParams.id,null,{bypassEventHandling:!0}),stateChangedHandler(sender,{state:"empty",fieldParams:fieldParams}),emit("data-changed",{fieldid:id,value:null,src:"usr",changeType:"clear"},sender))}),sender.on(fieldParams.itemsSource.updateCollectionTrigger,function(sender){if("fieldset"==source)sender.validateForm(function(sender,result){if(result.validated){var newItem=sender.getFormData(fieldsets);sender.clearFormData(fieldsets);var el=$("#"+fieldParams.id+" .edit-mode");el.data("value",btoa(JSON.stringify(newItem))),el.removeClass("edit-mode");var contentRenderer=rz.widgets.formHelpers.fieldRenderers.collection.getContentRenderer(fieldParams),sb=new StringBuilder;contentRenderer(sb,fieldParams,newItem,"edit-mode"),el.find(".data-area").html(sb.toString()),stateChangedHandler(sender,{state:"edited",fieldParams:fieldParams}),emit("data-changed",{fieldid:id,value:newItem,src:"usr",changeType:"update"},sender)}},fieldsets);else if("xxxxxxxxxxx"==source)throw"NOT_IMPLEMENTED"}),sender.on(fieldParams.itemsSource.cancelUpdateCollectionTrigger,function(sender){if("fieldset"==source){sender.clearFormData(fieldsets);var el=$("#"+fieldParams.id+" .edit-mode");el.removeClass("edit-mode"),stateChangedHandler(sender,{state:"editCancel",fieldParams:fieldParams})}else if("xxxxxxxxxxx"==source)throw"NOT_IMPLEMENTED"}),sender.on("collection-request-change",function(sender,e){var fieldid=e.fieldid,fieldParams=rz.widgets.formHelpers.getFieldParams(fieldid,sender.renderer.params.fields),deleteRow=function(){$("#"+e.rowid).fadeOut("fast",function(){$("#"+e.rowid).detach();var count=$("#"+e.fieldid+" .collection-dataitem").length,collectionEmpty=!1;count>0?stateChangedHandler(sender,{state:"deleted",fieldParams:fieldParams}):(stateChangedHandler(sender,{state:"empty",fieldParams:fieldParams}),collectionEmpty=!0),emit("data-changed",{fieldid:id,value:null,src:"usr",changeType:"delete",deletedData:e.rowData,isEmpty:collectionEmpty},sender)})};if("edit-item"==e.action){if("fieldset"!=fieldParams.itemsSource.type)throw"not implemented yeeeeeet";$("#"+e.fieldid+" .collection-dataitem").removeClass("edit-mode"),$("#"+e.rowid).addClass("edit-mode"),sender.setFormData(e.rowData,{rule:"restrict",fieldsets:fieldParams.itemsSource.source.split(" ")}),stateChangedHandler(sender,{state:"enterEditMode",fieldParams:fieldParams})}else if("remove-item"==e.action){var confirmMethod=rz.helpers.jsonUtils.getDataAtPath(fieldParams,"itemActions.confirmDeleteItemMethod");void 0!==confirmMethod?confirmMethod(sender,{fieldParams:fieldParams,originalEventArgs:e},function(confirm){confirm&&deleteRow()}):deleteRow()}})},doPosRenderActions:function(id,$this){}}),rz.widgets.formHelpers.createFieldPartRenderer("default-actions",function(sb,params){var ensureActions=function(){void 0===params.itemActions&&(params.itemActions={}),void 0===params.itemActions.actions&&(params.itemActions.actions=[{name:"Delete item",action:"remove-item",icon:"delete"},{name:"Edit item",action:"edit-item",icon:"edit"}])},title=rz.helpers.jsonUtils.getDataAtPath(params,"itemActions.properties.title")||"Actions";ensureActions(),sb.appendFormat('<div class="right floated content">'),sb.appendFormat('    <div class="ui icon top right pointing dropdown button">'),sb.appendFormat('        <i class="ellipsis vertical icon"></i>'),sb.appendFormat('        <div class="menu">'),sb.appendFormat('            <div class="header">{0}</div>',title);var actindex=0;params.itemActions.actions.forEach(function(action){sb.appendFormat('            <div id="itemfor_{3}{5}" class="item" data-value="itemfor_{3}{5}" data-rowid="{3}" data-action="{1}" data-targetfield="{4}"><i class="{0} icon"></i> {2}</div>',action.icon,action.action,action.name,params.__uid,params.id,actindex++)}),sb.appendFormat("        </div>"),sb.appendFormat("    </div>"),sb.appendFormat("</div>")},"collection"),rz.widgets.formHelpers.createFieldPartRenderer("default-list",function(sb,params,data){var dmp=rz.helpers.jsonUtils.getDataAtPath(params,"itemsSource.displayMemberPath"),text="";text=void 0!==dmp?void 0!==data?rz.helpers.jsonUtils.getDataAtPath(data,dmp):"":void 0!==data?data.toString():"",sb.appendFormat('<div class="{0} collectionitem-edition-indicator">',rz.helpers.jsonUtils.getDataAtPath(params,'itemsSource.itemsRenderer.rendererParams["editingLabelClass"]')||"ui red ribbon label"),sb.appendFormat('  <i class="edit icon"></i> {0}',rz.helpers.jsonUtils.getDataAtPath(params,'itemsSource.itemsRenderer.rendererParams["editingText"]')||""),sb.appendFormat("</div>"),sb.appendFormat(text)},"collection"),rz.widgets.formHelpers.createFieldRenderer("list",{activeInstances:{},helpers:{getElementID:function(id,suffix){return void 0===suffix&&(suffix=""),suffix+id+"_list"}},render:function(sb,field,containerID){sb.appendFormat('<select id="{0}" name="{0}" class="form-control">',containerID),field.listItems.forEach(function(it){sb.appendFormat('   <option value="{1}" {2}>{0}</option>',it.label,it.value,it.value==field.value?"selected":"")}),sb.appendFormat("</select>")},getValue:function(id){return $(id).val()},setValue:function(id,newValue){null==newValue?$(id).dropdown("restore default value"):$(id).dropdown("set selected",newValue)},bindEvents:function(id,emit,sender){var id=this.helpers.getElementID(id,"#"),handler=function(id,value,text){emit("data-changed",{fieldid:id,value:value,src:"usr",text:text},sender)};this.activeInstances[id].push(handler)},doPosRenderActions:function(id){var $this=this,elID=this.helpers.getElementID(id,"#");$(elID).dropdown({onChange:function(value,text,$selectedItem){var elInst=$this.activeInstances[elID];void 0!==elInst&&elInst.length>0&&elInst.forEach(function(item){item(elID,value,text)})}}),this.activeInstances[elID]=[]}}),rz.widgets.formHelpers.createFieldRenderer("password",{render:function(sb,field,containerID){var resolveAttributes=function(){var attr=field.attributes;if(void 0===attr||attr.length<=0)return"";var ret=" ";return attr.forEach(function(at){ret+=at.name+'="'+at.value+'" '}),ret};return sb.appendFormat('<input id="{1}" name="{1}" type="password" value="{0}" class="form-control"{2}>',field.value||"",containerID,resolveAttributes()),containerID+"_input_pwd"},getValue:function(id){return $(id).val()},setValue:function(id,newValue){$(id).val(newValue||"")},bindEvents:function(id,emit,sender){$("#"+id).change(function(e){emit("data-changed",{field:id,value:e.target.value,src:"usr"},sender)})},doPosRenderActions:function(id,$this){}}),rz.widgets.formHelpers.createFieldRenderer("text",{render:function(sb,field,containerID){var resolveAttributes=function(){var attr=field.attributes;if(void 0===attr||attr.length<=0)return"";var ret=" ";return attr.forEach(function(at){ret+=at.name+'="'+at.value+'" '}),ret};return sb.appendFormat('<input id="{1}" name="{1}" type="text" value="{0}" class="form-control"{2}>',field.value||"",containerID,resolveAttributes()),containerID+"_input"},getValue:function(id){return $(id).val()},setValue:function(id,newValue){$(id).val(newValue||"")},bindEvents:function(id,emit,sender){$("#"+id).change(function(e){emit("data-changed",{field:id,value:e.target.value,src:"usr"},sender)})},doPosRenderActions:function(id,$this){},executeAction:function(action,id){switch(action){case"disable":$("#"+id+" input").attr("disabled","disabled");break;case"enable":$("#"+id+" input").removeAttr("disabled")}}}),rz.widgets.FormRenderers["default"]=function(params,sender){var $this=this,initialize=function(){var defaultParams={horizontal:!1,formLabelSizeClass:"col-sm-2",formValueSizeClass:"col-sm-10",validation:{enabled:!0,rules:[]}};$this.params=$.extend(!0,{},defaultParams,params),$this.sender=sender};this.render=function(target,params,createDomElement){$this.params=params,$this.target=target;var baseID=target+"base_form",sb=new StringBuilder;sb.append('<div class="form-widget">'),sb.appendFormat('  <form id="{0}" class="{1} ui form">',baseID,params.horizontal?"form-horizontal":"");var hasTabs=isElegibleFormTabPanel();hasTabs&&renderTabPanels(sb),rz.widgets.formHelpers.renderDataRows(sb,params,$this.renderDataField),sb.append("  </form>"),sb.appendFormat('<div id="{0}_validation_report" class="validation-report-container"></div>',target),sb.append("</div>"),$this.sender.baseID=baseID,createDomElement({target:"#"+target,data:sb,method:"append",doAfterRenderAction:function(){rz.widgets.formHelpers.doPosRenderActions($this.sender),rz.widgets.formHelpers.bindEventHandlers($this.sender)}}),$this.sender.innerWidgetInitializeData.forEach(function(data){void 0!==data.doAfterRenderAction&&data.doAfterRenderAction()}),$this.sender.innerWidgetInitializeData=[]};var isElegibleFormTabPanel=function(){var elegible=!0;return $this.params.fields.forEach(function(it){return!it.fieldGroup||void 0!==it.groupType&&"tabpanel"!=it.groupType?(elegible=!1,null):void 0}),elegible},activeTabIndex=function(){var index=0;return $this.params.fields.forEach(function(it,id){it.active&&(index=id)}),index},renderTabPanels=function(sb){var actidx=activeTabIndex();sb.appendFormat('<div class="ui top attached tabular menu rz-tabpanel">'),$this.params.fields.forEach(function(it,id){it.groupName=it.groupName||generateRandomID();var targetID=generateRandomID(12);sb.appendFormat('<a class="item {2}  visual-element-for-group-{3}" data-tab="{1}">{0}</a>',it.groupLabel,targetID,id==actidx?"active":"",it.groupName),it.groupID=targetID,it.active=id==actidx}),sb.appendFormat("</div>")},renderCollapseContainer=function(sb,fieldID,field){field.groupID=field.groupID||generateRandomID(),field.groupName=field.groupName||generateRandomID(),sb.appendFormat('<div id="{0}" data-groupname="{1}" class="ui styled fluid accordion visual-element-for-group-{1}">',field.groupID,field.groupName),sb.appendFormat('    <div class="active title">'),sb.appendFormat('    <i class="dropdown icon"></i>'),sb.appendFormat("    {0}",field.groupLabel||""),sb.appendFormat("</div>"),sb.appendFormat('<div class="active content">'),field.fields.forEach(function(it){$this.renderDataField(sb,it)}),sb.appendFormat("</div>"),sb.appendFormat("</div>")},renderTabContainer=function(sb,field){sb.appendFormat('<div class="ui bottom attached tab segment {1} visual-element-for-group-{2}" data-tab="{0}">',field.groupID,field.active?"active":"",field.groupName),field.fields.forEach(function(it){$this.renderDataField(sb,it)}),sb.appendFormat("</div>")},renderFieldGroupContainer=function(sb,fieldID,field){var c=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen"],fieldCount=field.fields.count;field.groupName=field.groupName||generateRandomID(),(void 0===fieldCount||fieldCount>16)&&(fieldCount=2);var fieldCountName=field.columCount||c[fieldCount];sb.appendFormat('<div class="{0} fields visual-element-for-group-{1}" data-groupname="{1}">',fieldCountName,field.groupName),field.fields.forEach(function(it){$this.renderDataField(sb,it)}),sb.appendFormat("</div>")};this.hideFieldGroup=function(groupInfo){var groupType=groupInfo.groupType||"tabpanel";"tabpanel"==groupType&&$this.sender.deactivateGroup(groupInfo.groupName),$(".visual-element-for-group-"+groupInfo.groupName).css("display","none")},this.showFieldGroup=function(groupInfo){$(".visual-element-for-group-"+groupInfo.groupName).css("display","")},this.activateGroup=function(name){var params=$this.sender.getGroupInfo(name),groupType=params.groupType||"tabpanel";"tabpanel"==groupType&&$("#"+$this.sender.baseID+" .rz-tabpanel .item").tab("change tab",params.groupID),"collapse"==groupType&&$("#"+params.groupID).accordion("open",0)},this.deactivateGroup=function(name){var params=$this.sender.getGroupInfo(name),groupType=params.groupType||"tabpanel";if("tabpanel"==groupType){var el=$("#"+$this.sender.baseID+" .rz-tabpanel .item.visual-element-for-group-"+name);if(el.hasClass("active")){var siblings=el.siblings();if(siblings.length>0){var siblingID=$(siblings[0]).data("tab");el.tab("change tab",siblingID)}}}"collapse"==groupType&&$("#"+params.groupID).accordion("close",0)},this.renderDataField=function(sb,field){var fieldID=(field.id||field.model||"field_"+generateRandomID(8)).replace(/\./g,"_");if(field.fieldGroup){var groupType=field.groupType||"tabpanel";"tabpanel"==groupType?renderTabContainer(sb,field):"collapse"==groupType?renderCollapseContainer(sb,fieldID,field):"fieldgroup"==groupType&&renderFieldGroupContainer(sb,fieldID,field)}else{var h=$this.params.horizontal;void 0!==field.horizontal&&(h=field.horizontal),field.type=field.type||"text",field.id="*_*".replace("*",$this.target).replace("*",fieldID),sb.appendFormat('<div id="{0}" data-fieldtype="{1}" data-model="{2}" {3} class="form-row {4}{5}{6} {7}">',field.id,field.type,rz.widgets.formHelpers.resolveModelName(field,fieldID),rz.widgets.formHelpers.getInitialValueData(field),h?"inline fields field":"field",void 0!==field.wide?" "+field.wide+" wide":"",rz.widgets.formHelpers.resolveFieldSet(field),field.containerCssClass||"");var inputID=$this.target+"_"+fieldID+"_"+field.type;h&&sb.appendFormat('<div class="sixteen wide field">'),(void 0!==field.label||field.preserveLabelOffset)&&sb.appendFormat('<label for="{1}" class="{2} {3}">{0}</label>',field.label||"&nbsp;",inputID,"control-label",field.labelCssClass||""),rz.widgets.formHelpers.renderDataFieldByType(sb,field,inputID,$this),h&&sb.appendFormat("</div>"),sb.append("</div>")}},this.displayValidationReport=function(){rz.widgets.formHelpers.displayValidationReportImpl($this)},initialize()},rz.widgets.FormRenderers["grid-row"]=function(params,sender){var $this=this,initialize=function(){$this.params=params,$this.sender=sender};this.render=function(target,params,createDomElement){$this.target=target;var sb=new StringBuilder;sb.appendFormat('    <tr id="{0}base_form">',target),rz.widgets.formHelpers.renderDataRows(sb,params,$this.renderDataField),sb.appendFormat("    </tr>"),createDomElement({target:"#"+target,data:sb,method:"append",doAfterRenderAction:function(){rz.widgets.formHelpers.doPosRenderActions($this.sender),rz.widgets.formHelpers.bindEventHandlers($this.sender)}}),$this.sender.innerWidgetInitializeData.forEach(function(data){void 0!==data.doAfterRenderAction&&data.doAfterRenderAction()}),$this.sender.innerWidgetInitializeData=[]},this.renderDataField=function(sb,field){var fieldID=(field.id||field.model||"row_"+generateRandomID(8)).replace(/\./g,"_");if(field.fieldGroup)field.fields.forEach(function(it){$this.renderDataField(sb,it)});else{field.type=field.type||"text",field.id="*_*".replace("*",$this.target).replace("*",fieldID),sb.appendFormat('<td id="{0}" data-fieldtype="{1}" data-model="{2}" {3} class="row-form-field field{4} {5}">',field.id,field.type,rz.widgets.formHelpers.resolveModelName(field,fieldID),rz.widgets.formHelpers.getInitialValueData(field),rz.widgets.formHelpers.resolveFieldSet(field),field.containerCssClass||"");var inputID=$this.target+"_"+fieldID+"_"+field.type;rz.widgets.formHelpers.renderDataFieldByType(sb,field,inputID,$this),sb.append("</td>")}},this.fieldCount=function(){return $("#"+$this.target+"base_form > .row-form-field").length},this.getFieldIdAt=function(position){var p=position;return p>=0&&p<$this.sender.fieldCount()?$("#"+$this.target+"base_form > .row-form-field").eq(p).attr("id"):void 0},this.addField=function(fielddata){var sb=new StringBuilder;$this.renderDataField(sb,fielddata),$(sb.toString()).appendTo("#"+$this.target+"base_form")},this.insertField=function(fielddata,position){var sb=new StringBuilder;$this.renderDataField(sb,fielddata),$("#"+$this.target+"base_form > .row-form-field").eq(position).before(sb.toString())},this.removeFieldAt=function(position){var p=position;p>=0&&p<$this.sender.fieldCount()&&$("#"+$this.target+"base_form > .row-form-field").eq(p).remove()},this.getValueAt=function(position){var p=position;if(p>=0&&p<$this.sender.fieldCount()){var id=$("#"+$this.target+"base_form > .row-form-field").eq(p).attr("id");return rz.widgets.formHelpers.getValueOfField("#"+id)}},this.setValueAt=function(position,value){var p=position;if(p>=0&&p<$this.sender.fieldCount()){var id=$("#"+$this.target+"base_form > .row-form-field").eq(p).attr("id");rz.widgets.formHelpers.setValueOfField("#"+id,value,$this.sender),rz.widgets.formHelpers.emit("data-changed",{fieldid:id,value:value,src:"code"},$this.sender)}},this.displayValidationReport=function(){rz.widgets.formHelpers.displayValidationReportImpl($this)},initialize()},rz.widgets.FormRenderers["v-grid"]=function(params,sender){var $this=this,initialize=function(){var defaultParams={displayHeader:!1,headerLabel:"Label",headerValue:"Value"};$this.params=$.extend(!0,{},defaultParams,params),$this.sender=sender};this.render=function(target,params,createDomElement){$this.target=target;var sb=new StringBuilder;sb.append('<div class="grid-form">'),sb.append('<form class="ui form">'),sb.appendFormat('  <table id="{0}base_form" class="ui celled table">',target),renderHeader(sb,params),sb.append("    <tbody>"),rz.widgets.formHelpers.renderDataRows(sb,params,$this.renderDataField),sb.append("    </tbody>"),sb.append("  </table>"),sb.append("</form>"),sb.append("</div>"),createDomElement({target:"#"+target,data:sb,method:"append",doAfterRenderAction:function(){rz.widgets.formHelpers.doPosRenderActions($this.sender),rz.widgets.formHelpers.bindEventHandlers($this.sender),bindCollapseButtonEvents()}}),$this.sender.innerWidgetInitializeData.forEach(function(data){void 0!==data.doAfterRenderAction&&data.doAfterRenderAction()}),$this.sender.innerWidgetInitializeData=[]};var bindCollapseButtonEvents=function(){var fid="#"+$this.target+" .collapse-toggle-button";$(fid).click(function(e){e.preventDefault();var baseRow=$(e.currentTarget).parent().parent(),pid=baseRow.attr("id");baseRow.toggleClass("collapsed");var selector='tr[data-groupingid="*"]'.replace("*",pid);baseRow.hasClass("collapsed")?$(selector).hide():$(selector).show()})},renderHeader=function(sb,params){params.displayHeader&&(sb.append("<thead>"),sb.append("  <tr>"),sb.appendFormat("  <th>{0}</th>",params.headerLabel),sb.appendFormat("  <th>{0}</th>",params.headerValue),sb.append("  </tr>"),sb.append("</thead>"))},renderFieldGroup=function(field,fieldID,sb,parentGroup){if("fieldgroup"!=field.groupType){field.collapsible=void 0===field.collapsible?!0:field.collapsible;
var gid="*_*".replace("*",$this.target).replace("*",fieldID);sb.appendFormat('<tr id="{0}" class="vdgrid-group-header">',gid),field.collapsible?sb.appendFormat('<td colspan="2"><a href="#" class="collapse-toggle-button">{0}</a></td>',field.groupLabel):sb.appendFormat('<td colspan="2"><span>{0}</span></td>',field.groupLabel),sb.appendFormat("</tr>");var groupInfoData='data-groupingid="*"'.replace("*",gid);field.fields.forEach(function(it){$this.renderDataField(sb,it,groupInfoData)})}else field.fields.forEach(function(it){$this.renderDataField(sb,it,parentGroup)})};this.renderDataField=function(sb,field,gidata){var fieldID=(field.id||field.model||"row_"+generateRandomID(8)).replace(/\./g,"_");if(field.fieldGroup)renderFieldGroup(field,fieldID,sb,gidata);else{field.type=field.type||"text",field.id="*_*".replace("*",$this.target).replace("*",fieldID),sb.appendFormat('<tr id="{0}" data-fieldtype="{1}" data-model="{2}" {3} {4} class="field field-row{5} {6}">',field.id,field.type,rz.widgets.formHelpers.resolveModelName(field,fieldID),rz.widgets.formHelpers.getInitialValueData(field),gidata||"",rz.widgets.formHelpers.resolveFieldSet(field),field.containerCssClass||"");var inputID=$this.target+"_"+fieldID+"_"+field.type;sb.appendFormat('<td><label for="{1}" class="{2}">{0}</label></td>',field.label||"&nbsp;",inputID,field.labelCssClass||""),sb.appendFormat("<td>"),rz.widgets.formHelpers.renderDataFieldByType(sb,field,inputID,$this),sb.append("</td>"),sb.append("</tr>")}},this.fieldCount=function(){return $("#"+$this.target+"base_form tbody > .field-row").length},this.getFieldIdAt=function(position){var p=position;return p>=0&&p<$this.sender.fieldCount()?$("#"+$this.target+"base_form tbody > .field-row").eq(p).attr("id"):void 0},this.addField=function(fielddata){var sb=new StringBuilder;$this.renderDataField(sb,fielddata),$(sb.toString()).appendTo("#"+$this.target+"base_form tbody")},this.insertField=function(fielddata,position){var sb=new StringBuilder;$this.renderDataField(sb,fielddata),$("#"+$this.target+"base_form tbody > .field-row").eq(position).before(sb.toString())},this.removeFieldAt=function(position){var p=position;p>=0&&p<$this.sender.fieldCount()&&$("#"+$this.target+"base_form tbody > .field-row").eq(p).remove()},this.getValueAt=function(position){var p=position;if(p>=0&&p<$this.sender.fieldCount()){var id=$("#"+$this.target+"base_form tbody > .field-row").eq(p).attr("id");return rz.widgets.formHelpers.getValueOfField("#"+id)}},this.setValueAt=function(position,value){var p=position;if(p>=0&&p<$this.sender.fieldCount()){var id=$("#"+$this.target+"base_form tbody > .field-row").eq(p).attr("id");rz.widgets.formHelpers.setValueOfField("#"+id,value),rz.widgets.formHelpers.emit("data-changed",{fieldid:id,value:value,src:"code"},$this.sender)}},this.displayValidationReport=function(){rz.widgets.formHelpers.displayValidationReportImpl($this)},initialize()},rz.widgets.formHelpers.createFormValidator("compare",function(sender,value,validationParams,validationHandler){var resolveType=function(v,tp){if(void 0===v||null==v)return v;switch(tp){case"number":return parseFloat(v);case"date":return new Date(v);case"text":return v.toString();default:return v}},callback=rz.helpers.ensureFunction(validationHandler),operations={},op=validationParams.operator||"==",tp=validationParams.valueType||"text",vA=resolveType(value,tp),vB=resolveType(sender.getValueOfModel(validationParams.modelToCompare),tp);operations["=="]=function(a,b){return a==b},operations["==="]=function(a,b){return a===b},operations["!="]=function(a,b){return a!=b},operations["!=="]=function(a,b){return a!==b},operations[">"]=function(a,b){return a>b},operations[">="]=function(a,b){return a>=b},operations["<"]=function(a,b){return b>a},operations["<="]=function(a,b){return b>=a},callback(operations[op](vA,vB))}),rz.widgets.formHelpers.createFormValidator("custom",function(sender,value,validationParams,validationHandler){var callback=rz.helpers.ensureFunction(validationHandler);void 0!==validationParams.validationFunction?validationParams.validationFunction(sender,value,callback,validationParams):(console.warn("validation function not defined. Validation bypassed"),validationHandler(!0))}),rz.widgets.formHelpers.createFormValidator("range",function(sender,value,validationParams,validationHandler){var callback=rz.helpers.ensureFunction(validationHandler);if("number"==validationParams.valueType)if(void 0==value||""==value||null==value)callback(!0);else{var cVal=parseFloat(value),vmin=void 0!==validationParams.minValue?cVal>=validationParams.minValue:!0,vmax=void 0!==validationParams.maxValue?cVal<=validationParams.maxValue:!0;callback(vmin&&vmax)}}),rz.widgets.formHelpers.createFormValidator("regex",function(sender,value,validationParams,validationHandler){var validateEmptyValues=1==validationParams.validateEmptyValues;if(void 0==value||null==value||""==value&&!validateEmptyValues)validationHandler(!0);else{var result=value.toString().match(validationParams.regularExpression);validationHandler(null!=result&&0!=result.length)}}),rz.widgets.formHelpers.createFormValidator("required",function(sender,value,validationParams,validationHandler){var allowEmpty=1==validationParams.allowEmpty,callback=rz.helpers.ensureFunction(validationHandler);void 0==value||null==value||""==value&&!allowEmpty?callback(!1,validationParams):callback(!0,validationParams)}),rz.widgets.FormWidget=ruteZangada.widget("Form",rz.widgets.RZFormWidgetHelpers.FormWidgetInterface,rz.widgets.RZFormWidgetHelpers.FormWidgetEventHandlers,function(){var $this=this;this.validationReport=[],this.innerWidgetInitializeData=[],$this.lastFieldsetRules=void 0,this.initialize=function(params,initialized){var renderer=params.renderer||"default";$this.renderer=new rz.widgets.FormRenderers[renderer](params,$this),$this.on("data-changed",function(sender,e){updateValidationStatus()}),initialized($this.renderer.params)},this.render=function(target,params,createDomElement){$this.renderer.render(target,params,createDomElement)};var updateValidationStatus=function(){$this.isFormInvalid&&$this.validateForm(void 0,$this.lastFieldsetRules)};this.getAllFieldDefinitions=function(){var fieldList=[],traverseFields=function(fields){fields.forEach(function(f){f.fieldGroup?traverseFields(f.fields):fieldList.push(f)})};return traverseFields($this.renderer.params.fields),fieldList},this.getAllGroupDefinitions=function(){var fieldList=[],traverseFields=function(fields){fields.forEach(function(f){f.fieldGroup&&(fieldList.push(f),traverseFields(f.fields))})};return traverseFields($this.renderer.params.fields),fieldList};var ensureHandler=function(n){return $this.renderer[n]||impl[n]},impl={resolveRuleset:function(fieldsetRule){return void 0===fieldsetRule?void 0:"object"==typeof fieldsetRule?fieldsetRule:{rule:"restrict",fieldsets:fieldsetRule.split(" ")}},getValueOfModel:function(model){return $this.getValueOf($this.getfieldIdOfModel(model))},getfieldIdOfModel:function(model){return $("#"+$this.renderer.target+"base_form .field[data-model='"+model+"']").attr("id")},fieldCount:function(){return $("#"+$this.renderer.target+"base_form .form-row").length},getFieldIdAt:function(position){var p=position;return p>=0&&p<$this.fieldCount()?$("#"+$this.renderer.target+"base_form .form-row").eq(p).attr("id"):void 0},addField:function(fielddata){var sb=new StringBuilder;$this.renderer.renderDataField(sb,fielddata),$("#"+$this.renderer.target+"base_form .form-row").last().parent().append(sb.toString())},insertField:function(fielddata,position){var sb=new StringBuilder;$this.renderer.renderDataField(sb,fielddata),$("#"+$this.renderer.target+"base_form .form-row").eq(position).before(sb.toString())},removeFieldAt:function(position){var p=position;p>=0&&p<$this.fieldCount()&&$("#"+$this.renderer.target+"base_form .form-row").eq(p).remove()},removeFieldById:function(fieldid){fieldid.startsWith($this.renderer.target+"_")||(fieldid=$this.renderer.target+"_"+fieldid),$("#"+fieldid).remove()},getValueAt:function(position){var p=position;if(p>=0&&p<$this.fieldCount()){var id=$("#"+$this.renderer.target+"base_form .form-row").eq(p).attr("id");return rz.widgets.formHelpers.getValueOfField("#"+id)}},getValueOf:function(fieldid){return fieldid.startsWith($this.renderer.target+"_")||(fieldid=$this.renderer.target+"_"+fieldid),rz.widgets.formHelpers.getValueOfField("#"+fieldid)},setValueOf:function(fieldid,value,behaviors){var bh=behaviors||{bypassEventHandling:!1};void 0!==fieldid&&(fieldid.startsWith($this.renderer.target+"_")||(fieldid=$this.renderer.target+"_"+fieldid),rz.widgets.formHelpers.setValueOfField("#"+fieldid,value,$this),bh.bypassEventHandling||rz.widgets.formHelpers.emit("data-changed",{fieldid:fieldid,value:value,src:"code"},$this))},setValueOfModel:function(model,value){return $this.setValueOf($this.getfieldIdOfModel(model),value)},setValueAt:function(position,value){var p=position;if(p>=0&&p<$this.fieldCount()){var id=$("#"+$this.renderer.target+"base_form .form-row").eq(p).attr("id"),formerValue=rz.widgets.formHelpers.getValueOfField("#"+id);formerValue!=value&&(rz.widgets.formHelpers.setValueOfField("#"+id,value,$this),rz.widgets.formHelpers.emit("data-changed",{fieldid:id,value:value,src:"code"},$this))}},getFormData:function(fieldsetRule){return rz.widgets.formHelpers.getFormDataImpl($this.renderer,fieldsetRule)},setFormData:function(formData,fieldsetRule){rz.widgets.formHelpers.setFormDataImpl(formData,$this.renderer,fieldsetRule)},clearFormData:function(fieldsetRule){rz.widgets.formHelpers.clearFormDataImpl($this.renderer,fieldsetRule)},validateForm:function(validationResultHandler,fieldsetRule,forceSuccess){rz.widgets.formHelpers.validateFormImpl($this.renderer,$this.renderer.params,validationResultHandler,fieldsetRule,forceSuccess)},getFieldParams:function(filterValue,filterBy){var fieldid=void 0;return void 0===filterBy&&(filterBy="model"),fieldid="id"==filterBy?filterValue.startsWith($this.renderer.target+"_")?filterValue:$this.renderer.target+"_"+filterValue:"position"==filterBy?$this.getFieldIdAt(parseInt(filterValue)):$this.getfieldIdOfModel(filterValue),rz.widgets.formHelpers.getFieldParams(fieldid,$this.renderer.params.fields)},getFieldValue:function(field,filterBy){return"id"==filterBy?$this.getValueOf(field):"position"==filterBy?$this.getValueAt(parseInt(field)):$this.getValueOfModel(field)},setFieldValue:function(field,value,filterBy){return"id"==filterBy?$this.setValueOf(field,value):"position"==filterBy?$this.setValueAt(parseInt(field),value):$this.setValueOfModel(field,value)},getGroupDefinition:function(groupName){if(void 0!==$this.renderer.params.fields){var groupRef=void 0,traverseFields=function(fields){return fields.every(function(f){if(f.fieldGroup){if(f.groupName==groupName)return groupRef=f,!1;traverseFields(f.fields)}return!0}),groupRef};return traverseFields($this.renderer.params.fields)}},getFieldsOfGroup:function(group){var result=[],groupRef="string"==typeof group?$this.getGroupDefinition(group):group,traverse=function(g){g.fields.forEach(function(f){f.fieldGroup?traverse(f):result.push(f)})};return void 0!==groupRef&&traverse(groupRef),result},getFieldsOfRuleset:function(fieldsetRule){for(var fields=[],rcount=$this.fieldCount(),i=0;rcount>i;i++){var id=$this.getFieldIdAt(i);if(void 0!==fieldsetRule&&rz.widgets.formHelpers.fieldMatchFieldSetRule(id,fieldsetRule)||void 0===fieldsetRule){var originalid=id.replace($this.renderer.target+"_","");fields.push($this.getFieldParams(originalid,"id"))}}return fields},getFieldDefinitions:function(filterValue,filterBy){var fields=[];if(void 0===filterValue)fields=$this.getAllFieldDefinitions();else switch(filterBy||"model"){case"id":case"position":case"model":var f=$this.getFieldParams(filterValue,filterBy);void 0!==f&&fields.push(f);break;case"fieldset":fields=$this.getFieldsOfRuleset(filterValue);break;case"group":fields=$this.getFieldsOfGroup(filterValue)}return fields},disableFields:function(filterValue,filterBy){var fields=$this.getFieldDefinitions(filterValue,filterBy);fields.length>0&&fields.forEach(function(field){$("#"+field.id).addClass("disabled"),rz.widgets.formHelpers.executeFieldAction("disable",field.id,$this,void 0,field)})},enableFields:function(filterValue,filterBy){var fields=$this.getFieldDefinitions(filterValue,filterBy);fields.length>0&&fields.forEach(function(field){$("#"+field.id).removeClass("disabled"),rz.widgets.formHelpers.executeFieldAction("enable",field.id,$this,void 0,field)})},hideFields:function(filterValue,filterBy,preserveGroupVisibility){var fields=$this.getFieldDefinitions(filterValue,filterBy);fields.length>0&&(fields.forEach(function(field){$("#"+field.id).css("display","none"),rz.widgets.formHelpers.executeFieldAction("hide",field.id,$this,void 0,field)}),"group"!=filterBy||preserveGroupVisibility||$this.renderer.hideFieldGroup($this.getGroupDefinition(filterValue)))},displayFields:function(filterValue,filterBy){var fields=$this.getFieldDefinitions(filterValue,filterBy);fields.length>0&&(fields.forEach(function(field){$("#"+field.id).css("display",""),rz.widgets.formHelpers.executeFieldAction("display",field.id,$this,void 0,field)}),"group"==filterBy&&$this.renderer.showFieldGroup($this.getGroupDefinition(filterValue)))},activateGroup:function(name){console.warn("not implemented for this renderer")},deactivateGroup:function(name){console.warn("not implemented for this renderer")},getGroupInfo:function(name){var defs=$this.getAllGroupDefinitions(),groupDefinition=defs.find(function(d){return d.groupName==name});return groupDefinition}};this.fieldCount=function(){return ensureHandler("fieldCount")()},this.getFieldIdAt=function(position){return ensureHandler("getFieldIdAt")(position)},this.addField=function(fielddata){ensureHandler("addField")(fielddata),rz.widgets.formHelpers.bindEventHandlersOfField(fielddata.type,fielddata.id,$this),rz.widgets.formHelpers.doPosRenderActionsOfField(fielddata.type,fielddata.id,$this),$this.raiseEvent("field-added",fielddata,$this)},this.insertField=function(fielddata,position){ensureHandler("insertField")(fielddata,position),rz.widgets.formHelpers.bindEventHandlersOfField(fielddata.type,fielddata.id,$this),rz.widgets.formHelpers.doPosRenderActionsOfField(fielddata.type,fielddata.id,$this)},this.removeFieldAt=function(position){ensureHandler("removeFieldAt")(position)},this.removeFieldById=function(fieldid){ensureHandler("removeFieldById")(fieldid)},this.getValueAt=function(position){return ensureHandler("getValueAt")(position)},this.getValueOf=function(fieldid){return ensureHandler("getValueOf")(fieldid)},this.setValueAt=function(position,value){ensureHandler("setValueAt")(position,value)},this.setValueOf=function(fieldid,value,behaviors){ensureHandler("setValueOf")(fieldid,value,behaviors)},this.getfieldIdOfModel=function(model){return ensureHandler("getfieldIdOfModel")(model)},this.getValueOfModel=function(model){return ensureHandler("getValueOfModel")(model)},this.setValueOfModel=function(model,value){return ensureHandler("setValueOfModel")(model,value)},this.getFormData=function(fieldsetRule){return ensureHandler("getFormData")(impl.resolveRuleset(fieldsetRule))},this.setFormData=function(formData,fieldsetRule){$this.lastFieldsetRules=impl.resolveRuleset(fieldsetRule),ensureHandler("setFormData")(formData,$this.lastFieldsetRules)},this.clearFormData=function(fieldsetRule,preserveValidationStatus){preserveValidationStatus||ensureHandler("validateForm")(void 0,void 0,!0),$this.lastFieldsetRules=impl.resolveRuleset(fieldsetRule),ensureHandler("clearFormData")($this.lastFieldsetRules)},this.validateForm=function(validationResultHandler,fieldsetRule){$this.lastFieldsetRules=impl.resolveRuleset(fieldsetRule),ensureHandler("validateForm")(validationResultHandler,$this.lastFieldsetRules)},this.getFieldParams=function(filterValue,filterBy){return ensureHandler("getFieldParams")(filterValue,filterBy)},this.getFieldValue=function(field,filterBy){return ensureHandler("getFieldValue")(field,filterBy)},this.setFieldValue=function(field,value,filterBy){return ensureHandler("setFieldValue")(field,value,filterBy)},this.getGroupDefinition=function(groupName){return ensureHandler("getGroupDefinition")(groupName)},this.getFieldsOfGroup=function(groupName){return ensureHandler("getFieldsOfGroup")(groupName)},this.getFieldDefinitions=function(filterValue,filterBy){return ensureHandler("getFieldDefinitions")(filterValue,filterBy)},this.getFieldsOfRuleset=function(fieldsetRule){return ensureHandler("getFieldsOfRuleset")(impl.resolveRuleset(fieldsetRule))},this.disableFields=function(filterValue,filterBy){ensureHandler("disableFields")(filterValue,filterBy)},this.enableFields=function(filterValue,filterBy){ensureHandler("enableFields")(filterValue,filterBy)},this.hideFields=function(filterValue,filterBy,preserveGroupVisibility){ensureHandler("hideFields")(filterValue,filterBy,preserveGroupVisibility)},this.displayFields=function(filterValue,filterBy){ensureHandler("displayFields")(filterValue,filterBy)},this.getGroupInfo=function(name){return ensureHandler("getGroupInfo")(name)},this.activateGroup=function(name){ensureHandler("activateGroup")(name)},this.deactivateGroup=function(name){ensureHandler("deactivateGroup")(name)}});